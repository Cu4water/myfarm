// ==UserScript==
// @name         我的农田
// @author       bug人@,Pinenutn
// @version      1.0.1
// @description  实现部分农田小游戏插件，使用<.成为农夫>开启游戏，<.农场指令>查看帮助
// @timestamp    1729357648
// @license      Apache-2.0
// @homepageURL  https://github.com/bugtower100/myfarm
// @updateUrl    https://raw.githubusercontent.com/bugtower100/myfarm/refs/heads/master/%E5%8F%AA%E6%98%AF%E7%94%A8%E6%9D%A5%E6%9B%B4%E6%96%B0%E7%9A%84%E9%A1%B5%E9%9D%A2.js
// ==/UserScript==

(()=>{var I=class m{constructor(){this.lastDate=new Date,this.currentWeather=this.getRandomWeather()}static getInstance(){return m.instance||(m.instance=new m),m.instance}getRandomWeather(){let e=Math.random();return e<.5?"\u6674\u5929":e<.8?"\u96E8\u5929":e<.85?"\u5E72\u65F1":e<.95?"\u66B4\u98CE\u96E8":"\u4E30\u6536\u65E5"}updateWeather(){let e=new Date;e.getDate()!==this.lastDate.getDate()?(this.currentWeather=this.getRandomWeather(),this.lastDate=e,console.log(`\u5929\u6C14\u5DF2\u66F4\u65B0\u4E3A\uFF1A${this.currentWeather}`)):console.log(`\u5929\u6C14\u672A\u66F4\u65B0\uFF0C\u5F53\u524D\u5929\u6C14\u4E3A\uFF1A${this.currentWeather}`)}getCurrentWeather(){return this.currentWeather}getWeatherInfo(){return`\u5F53\u524D\u5929\u6C14: ${this.currentWeather}`}};var z={\u6674\u5929:1,\u96E8\u5929:.8,\u5E72\u65F1:1.5,\u66B4\u98CE\u96E8:2.5,\u4E30\u6536\u65E5:.5},g={\u9632\u98CE\u8349\u79CD\u5B50:{price:50,level:1},\u80E1\u841D\u535C\u79CD\u5B50:{price:60,level:1},\u767D\u841D\u535C\u79CD\u5B50:{price:70,level:2},\u82B1\u6930\u83DC\u79CD\u5B50:{price:70,level:2},\u5C0F\u767D\u83DC\u79CD\u5B50:{price:70,level:2},\u9752\u8C46\u79CD\u5B50:{price:70,level:2},\u80A5\u6599:{price:100,level:2},\u571F\u8C46\u79CD\u5B50:{price:75,level:3},\u5927\u9EC4\u79CD\u5B50:{price:80,level:3},\u7518\u84DD\u83DC\u79CD\u5B50:{price:80,level:3},\u8461\u8404\u79CD\u5B50:{price:80,level:3},\u5411\u65E5\u8475\u79CD\u5B50:{price:90,level:3},\u73AB\u7470\u82B1\u79CD\u5B50:{price:90,level:3},\u8349\u8393\u79CD\u5B50:{price:100,level:4},\u8FA3\u6912\u79CD\u5B50:{price:100,level:4},\u751C\u74DC\u79CD\u5B50:{price:105,level:4},\u7EA2\u53F6\u5377\u5FC3\u83DC\u79CD\u5B50:{price:105,level:4},\u6768\u6843\u79CD\u5B50:{price:110,level:4},\u90C1\u91D1\u9999\u79CD\u5B50:{price:105,level:4},\u73AB\u7470\u4ED9\u5B50\u79CD\u5B50:{price:110,level:4},\u8304\u5B50\u79CD\u5B50:{price:110,level:5},\u82CB\u83DC\u79CD\u5B50:{price:110,level:5},\u5C71\u836F\u79CD\u5B50:{price:110,level:5},\u590F\u5B63\u4EAE\u7247\u79CD\u5B50:{price:120,level:5},\u865E\u7F8E\u4EBA\u79CD\u5B50:{price:150,level:5},\u6843\u6811\u79CD\u5B50:{price:120,level:5},\u82F9\u679C\u6811\u79CD\u5B50:{price:120,level:5},\u9999\u8549\u6811\u79CD\u5B50:{price:150,level:5},\u5B9D\u77F3\u751C\u8393\u79CD\u5B50:{price:200,level:5},\u6269\u5BB9\u7530\u5730:{price:500,level:3},\u9C7C\u9975:{price:20,level:4},\u6269\u5BB9\u7530\u5730ii:{price:1e3,level:5}},G=class{constructor(){this.weatherManager=I.getInstance()}updateWeather(){this.weatherManager.updateWeather()}getCurrentWeather(){return this.weatherManager.getCurrentWeather()}getWeatherInfo(){return this.weatherManager.getWeatherInfo()}},S=class m{constructor(e,t){this.stealCooldown=60*1e3;this.id=e,this.name=t,this.fields=6,this.money=200,this.level=1,this.experience=0,this.crops={},this.warehouse={\u9632\u98CE\u8349\u79CD\u5B50:6},this.lastStealTime=0,this.weatherSystem=new G,this.lastSignInDate="",this.purchasedFields={},this.fishPond=0,this.lastFishPondRefresh=""}static getData(e){try{let t=JSON.parse(seal.ext.find("\u6211\u7684\u519C\u7530\u63D2\u4EF6").storageGet(e)||"{}");if(Object.keys(t).length===0)return null;let r=new m(e,t.name);return r.fields=t.fields||6,r.money=t.money||200,r.level=t.level||1,r.experience=t.experience||0,r.crops=t.crops||{},r.warehouse=t.warehouse||{\u9632\u98CE\u8349\u79CD\u5B50:6},r.lastStealTime=t.lastStealTime||0,r.lastSignInDate=t.lastSignInDate||"",r.purchasedFields=t.purchasedFields||{},r.fishPond=t.fishPond||0,r.lastFishPondRefresh=t.lastFishPondRefresh||"",r}catch(t){return null}}saveData(){seal.ext.find("\u6211\u7684\u519C\u7530\u63D2\u4EF6").storageSet(this.id.toString(),JSON.stringify(this))}checkLevelUp(){let t=[100,500,1e3,1500,2e3,2500,3e3,3600,4e3,5e3][this.level-1];return this.experience>=t?(this.level++,this.experience-=t,this.saveData(),this.level===4?`\u606D\u559C\uFF01\u60A8\u5347\u7EA7\u5230${this.level}\u7EA7\u4E86\uFF0C\u53EF\u4EE5\u89E3\u9501\u66F4\u591A\u5546\u54C1\u4E86\u3002
\u606D\u559C\u60A8\u89E3\u9501\u9C7C\u5858\uFF0C\u5F00\u542F\u9493\u9C7C\u529F\u80FD\uFF01`:this.level===3?`\u606D\u559C\uFF01\u60A8\u5347\u7EA7\u5230${this.level}\u7EA7\u4E86\uFF0C\u53EF\u4EE5\u89E3\u9501\u66F4\u591A\u5546\u54C1\u4E86\u3002
\u5468\u56F4\u7684\u795E\u79D8\u5C0F\u7CBE\u7075\u5F00\u59CB\u6CE8\u610F\u4F60\u7684\u7530\u5730\u4E86\uFF01`:`\u606D\u559C\uFF01\u60A8\u5347\u7EA7\u5230${this.level}\u7EA7\u4E86\uFF0C\u53EF\u4EE5\u89E3\u9501\u66F4\u591A\u5546\u54C1\u4E86\u3002`):null}fish(){let e=new R(this.id,this.name);for(let t in e)e[t]=this[t]||e[t];return e.fish()}plantCrop(e,t){if(!e.endsWith("\u79CD\u5B50"))return"\u8BE5\u7269\u54C1\u4E0D\u53EF\u79CD\u690D\u3002";if(!this.warehouse[e])return`\u4F60\u6CA1\u6709${e}\uFF0C\u8BF7\u8D2D\u4E70\u540E\u79CD\u690D\u3002`;let r=this.fields-Object.keys(this.crops).length;if(t>r)return`\u4F60\u53EA\u6709${r}\u5757\u7A7A\u95F2\u7530\u5730\u3002`;if(this.warehouse[e]<t)return`\u4F60\u7684\u4ED3\u5E93\u4E2D\u6CA1\u6709\u8DB3\u591F\u7684${e}\u3002`;let a=z[this.weatherSystem.getCurrentWeather()],c=Math.random()*(4-.5)+.5,d=new Date().getTime()+c*60*60*1e3*a,h=.15,f=Math.random()<h;if(console.log(`\u4E8B\u4EF6\u89E6\u53D1\u6982\u7387: ${h}, \u4E8B\u4EF6\u662F\u5426\u89E6\u53D1: ${f}`),f){let p=Math.random()<.33?"\u5C0F\u7CBE\u7075\u50AC\u719F":Math.random()<.5?"\u5973\u5DEB\u836F\u6C34\u81F4\u6B7B":"\u72D7\u718A\u538B\u574F\u4F5C\u7269";if(console.log(`\u4E8B\u4EF6\u7C7B\u578B: ${p}`),p==="\u5C0F\u7CBE\u7075\u50AC\u719F"&&this.level>=3)return d*=.8,`\u54E6\u5440\uFF0C\u4F60\u7684\u7530\u5730\u5438\u5F15\u5230\u8FD9\u7FA4\u53EF\u7231\u7684\u5C0F\u4E1C\u897F\u4E86\u554A~\u4ED6\u4EEC\u7ED9\u7530\u5730\u65BD\u52A0\u4E86\u9B54\u6CD5\u54E6\u3002
\u6210\u529F\u79CD\u690D${t}\u5757${e}\uFF0C\u6210\u719F\u65F6\u95F4\u4E3A${this.formatTime(c*.8)}\u3002`;if(p==="\u5973\u5DEB\u836F\u6C34\u81F4\u6B7B"){this.crops={};let v=Math.floor(Math.random()*51)+50,w=Math.floor(Math.random()*4)+3;return this.money+=v,this.warehouse.\u80A5\u6599||(this.warehouse.\u80A5\u6599=0),this.warehouse.\u80A5\u6599+=w,this.saveData(),`\u545C\u54C7\uFF01\u8DEF\u8FC7\u7684\u5B9E\u4E60\u5973\u5DEB\u4E0D\u5C0F\u5FC3\u628A\u836F\u6C34\u5168\u6D12\u4E86\uFF0C\u4F60\u7684\u519C\u4F5C\u7269\u5168\u6CA1\u4E86\uFF01\u5BF9\u65B9\u5F88\u62B1\u6B49\uFF0C\u4E8E\u662F\u7ED9\u4E86\u4F60\u7684\u8865\u507F~\u83B7\u5F97${v}\u91D1\u5E01\u548C\u80A5\u6599\xD7${w}\u3002`}else if(p==="\u72D7\u718A\u538B\u574F\u4F5C\u7269"&&t>2){let v=Math.floor(Math.random()*3)+3,w=Math.min(v,t);return Object.keys(this.crops).slice(0,w).forEach(x=>delete this.crops[x]),this.saveData(),`\u4E0D\u597D\u4E86\uFF0C\u4E00\u53EA\u8DEF\u8FC7\u7684\u72D7\u718A\u5728\u4F60\u7684\u7530\u5730\u91CC\u7761\u4E86\u4E00\u89C9\uFF0C\u538B\u574F\u4E86${w}\u5757\u4F5C\u7269...`}}for(let p=0;p<t;p++){let v=this.getNextAvailableField();this.crops[v]={seed:e,harvestTime:d,stolen:!1}}return this.warehouse[e]-=t,this.warehouse[e]===0&&delete this.warehouse[e],this.saveData(),`\u6210\u529F\u79CD\u690D${t}\u5757${e}\uFF0C\u6210\u719F\u65F6\u95F4\u4E3A${this.formatTime(c)}\u3002`}getNextAvailableField(){let e=1;for(;this.crops[`\u7530\u5730${e}`];)e++;return`\u7530\u5730${e}`}harvestAllCrops(){let e=new Date().getTime(),t={},r=0,a=0;for(let h in this.crops)if(this.crops[h].harvestTime<=e&&!this.crops[h].stolen){let f=this.crops[h].seed,p=f.replace("\u79CD\u5B50",""),w=g[f].price*.5,T=Math.floor(Math.random()*11)+10;t[p]||(t[p]=0),t[p]++,r+=w,a+=T,delete this.crops[h],this.warehouse[p]||(this.warehouse[p]=0),this.warehouse[p]++}if(Object.keys(t).length===0)return"\u5F53\u524D\u7530\u5730\u6682\u65F6\u6CA1\u6709\u6210\u719F\u4F5C\u7269\u54E6~";this.money+=r,this.experience+=a,this.saveData();let c=this.checkLevelUp(),d="\u6210\u529F\u6536\u83B7";for(let h in t)d+=` ${h}\xD7${t[h]}`;return d+=`\uFF0C\u83B7\u5F97${r}\u91D1\u5E01\u548C${a}\u7ECF\u9A8C\u3002`,c&&(d+=`
${c}`),d}harvestCrop(e){if(e==="all")return this.harvestAllCrops();if(!this.crops[e]||this.crops[e].harvestTime>new Date().getTime()||this.crops[e].stolen)return`${e}\u8FD8\u6CA1\u6709\u6210\u719F\u4F5C\u7269\u54E6\uFF01`;let t=.05,r=Math.random()<t;if(console.log(`\u5192\u9669\u8005\u5077\u83DC\u4E8B\u4EF6\u89E6\u53D1\u6982\u7387: ${t}, \u4E8B\u4EF6\u662F\u5426\u89E6\u53D1: ${r}`),r){let x=Object.keys(this.crops).filter(D=>this.crops[D].harvestTime<=new Date().getTime()&&!this.crops[D].stolen);if(console.log(`\u6210\u719F\u7530\u5730\u6570\u91CF: ${x.length}`),x.length>0){let D=Math.floor(Math.random()*2)+1,E=x.slice(0,D);console.log(`\u88AB\u5077\u8D70\u7684\u7530\u5730\u6570\u91CF: ${E.length}`),E.forEach(F=>delete this.crops[F]);let W=Math.floor(Math.random()*51)+50,P=Object.keys(g).filter(F=>F.endsWith("\u79CD\u5B50")),b=P[Math.floor(Math.random()*P.length)],N=Math.floor(Math.random()*3)+3;return this.money+=W,this.warehouse[b]||(this.warehouse[b]=0),this.warehouse[b]+=N,this.saveData(),`\u8DEF\u8FC7\u7684\u5192\u9669\u8005\u91C7\u8D70\u4E86\u4F60\u7530\u5730\u91CC\u7684\u4F5C\u7269\uFF01\u4E0D\u8FC7\u6211\u4EEC\u53CA\u65F6\u8FFD\u4E0A\u4E86\u4ED6\u4EEC~
\u603B\u4E4B\u8981\u56DE\u4E86\u4E00\u4E9B\u62A5\u916C\u5462...\u4E5F\u4E0D\u7B97\u5DEE\uFF1F
\u83B7\u5F97${W}\u91D1\u5E01\u548C${b}\xD7${N}\u3002`}}let a=this.crops[e].seed,c=a.replace("\u79CD\u5B50",""),h=g[a].price*.5,f=Math.floor(Math.random()*11)+10,p=this.level*.5;if(this.weatherSystem.getCurrentWeather()==="\u4E30\u6536\u65E5"&&(p+=5),Math.random()<p/100)return h*=2,f*=2,this.warehouse[c]+=2,this.saveData(),`\u54E6\u5440\u54E6\u5440~\u7B80\u76F4\u662F\u5927\u4E30\u6536\uFF01
\u6210\u529F\u6536\u83B7${c}\xD72\uFF0C\u83B7\u5F97${h}\u91D1\u5E01\u548C${f}\u7ECF\u9A8C\u3002`;this.money+=h,this.experience+=f,delete this.crops[e],this.warehouse[c]||(this.warehouse[c]=0),this.warehouse[c]++,this.saveData();let w=this.checkLevelUp(),T=`\u6210\u529F\u6536\u83B7${c}\uFF0C\u83B7\u5F97${h}\u91D1\u5E01\u548C${f}\u7ECF\u9A8C\u3002`;return w&&(T+=`
${w}`),T}getFarmInfo(){let e=`\u7528\u6237\u540D: ${this.name}
\u91D1\u5E01: ${this.money}
\u7B49\u7EA7: ${this.level}
\u7ECF\u9A8C: ${this.experience}
`,t=new Date().getTime();for(let r in this.crops){let a=(this.crops[r].harvestTime-t)/36e5;a<=0?e+=`${r}: ${this.crops[r].seed.replace("\u79CD\u5B50","")}\uFF08\u5DF2\u6210\u719F\uFF09
`:e+=`${r}: ${this.crops[r].seed}\uFF0C\u5269\u4F59\u65F6\u95F4: ${this.formatTime(a)}
`}return e}formatTime(e){let t=Math.floor(e),r=Math.round((e-t)*60);return`${t}\u5C0F\u65F6${r}\u5206\u949F`}getStoreInfo(){let e=`\u5546\u5E97\u5546\u54C1:
`;for(let t in g){let r=g[t].level;t==="\u6269\u5BB9\u7530\u5730"&&this.purchasedFields[r]||(e+=`${t}: ${g[t].price}\u91D1\u5E01 (\u7B49\u7EA7${g[t].level})
`)}return e}buyItem(e,t=1){if(!g[e])return`\u5546\u5E97\u4E2D\u6CA1\u6709${e}\u3002`;if(this.level<g[e].level)return`\u4F60\u7684\u7B49\u7EA7\u4E0D\u591F\u8D2D\u4E70${e}\uFF0C\u518D\u52A0\u628A\u52B2\u5427~`;if(isNaN(t)||t<=0||!Number.isInteger(t))return"\u8BF7\u8F93\u5165\u4E00\u4E2A\u6709\u6548\u7684\u8D2D\u4E70\u6570\u91CF\u54E6";let r=g[e].price*t;if(this.money<r)return`\u55EF...\u4F60\u7684\u91D1\u5E01\u4E0D\u591F\u8D2D\u4E70${t}\u4E2A${e}\u3002`;if(e==="\u6269\u5BB9\u7530\u5730"){let a=g[e].level;if(this.purchasedFields[a])return"\u4F60\u5DF2\u7ECF\u8D2D\u4E70\u8FC7\u8BE5\u7B49\u7EA7\u7684\u6269\u5BB9\u7530\u5730\u5566\uFF01";this.fields+=t,this.purchasedFields[a]=!0}else if(e==="\u6269\u5BB9\u7530\u5730ii"){if(this.purchasedFields[5])return"\u4F60\u5DF2\u7ECF\u8D2D\u4E70\u8FC75\u7EA7\u6269\u5BB9\u7530\u5730\u5566\uFF01";this.fields+=1,this.purchasedFields[5]=!0,delete g.\u6269\u5BB9\u7530\u5730ii}else this.warehouse[e]||(this.warehouse[e]=0),this.warehouse[e]+=t;return this.money-=r,this.saveData(),`\u94DB\u94DB\u2014\u2014\u6210\u529F\u8D2D\u4E70${e}${t}\u4E2A\u3002`}sellItem(e,t=1){if(isNaN(t)||!Number.isInteger(t)||t<=0)return"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u51FA\u552E\u6570\u91CF\u3002";if(!this.warehouse[e])return`\u4F60\u7684\u4ED3\u5E93\u4E2D\u6CA1\u6709${e}\u54E6`;if(this.warehouse[e]<t)return`\u4F60\u7684\u4ED3\u5E93\u4E2D\u6CA1\u6709\u8DB3\u591F\u7684${e}\u5566\uFF01`;let r;if(e.endsWith("\u79CD\u5B50"))r=g[e].price*.8;else if(e==="\u9C7C\u9975")r=g[e].price*.5;else if(this.isFish(e))r=this.getFishPrice(e);else{let c=e+"\u79CD\u5B50";r=g[c].price*1.25}let a=r*t;return this.money+=a,this.warehouse[e]-=t,this.warehouse[e]===0&&delete this.warehouse[e],this.saveData(),`\u6210\u529F\u51FA\u552E${e}${t}\u4E2A\uFF0C\u83B7\u5F97${a}\u91D1\u5E01~`}isFish(e){return["\u9CC0\u9C7C","\u6C99\u4E01\u9C7C","\u9CB7\u9C7C","\u5927\u5634\u9C88\u9C7C","\u9CA4\u9C7C"].includes(e)}getFishPrice(e){return{\u9CA4\u9C7C:20,\u9CB1\u9C7C:30,\u5C0F\u5634\u9C88\u9C7C:30,\u592A\u9633\u9C7C:45,\u9CC0\u9C7C:45,\u6C99\u4E01\u9C7C:45,\u6CB3\u9C88:50,\u9CA2\u9C7C:50,\u9CB7\u9C7C:50,\u7EA2\u9CB7\u9C7C:55,\u6D77\u53C2:55,\u8679\u9CDF\u9C7C:55,\u5927\u773C\u9C7C:60,\u897F\u9CB1:60,\u5927\u5934\u9C7C:60,\u5927\u5634\u9C88\u9C7C:60,\u9C91\u9C7C:60,\u9B3C\u9C7C:65,\u7F57\u975E\u9C7C:65,\u6728\u8DC3\u9C7C:65,\u72EE\u5B50\u9C7C:65,\u6BD4\u76EE\u9C7C:70,\u5927\u6BD4\u76EE\u9C7C:70,\u5348\u591C\u9CA4\u9C7C:70,\u53F2\u83B1\u59C6\u9C7C:70,\u867E\u864E\u9C7C:70,\u7EA2\u9CBB\u9C7C:75,\u9752\u82B1\u9C7C:75,\u72D7\u9C7C:75,\u864E\u7EB9\u9CDF\u9C7C:75,\u84DD\u94C1\u997C\u9C7C:75,\u6C99\u9C7C:75}[e]||0}getWarehouseInfo(){let e=`\u4ED3\u5E93\u7269\u54C1:
`;for(let t in this.warehouse)e+=`${t}: ${this.warehouse[t]}
`;return e}removeCrop(e){return this.crops[e]?(delete this.crops[e],this.saveData(),`\u6210\u529F\u94F2\u9664${e}\u7684\u4F5C\u7269\u3002`):`${e}\u6CA1\u6709\u79CD\u690D\u4F5C\u7269\u3002`}stealCrop(e){let t=Date.now();if(this.lastStealTime!==0&&t-this.lastStealTime<this.stealCooldown)return`\u9644\u8FD1\u8FD8\u6709\u4EBA\u770B\u7740\u5462\uFF0C\u518D\u7B49${Math.ceil((this.stealCooldown-(t-this.lastStealTime))/1e3)}\u79D2\u540E\u518D\u8BD5\u5427...`;let r=Object.keys(e.crops).filter(h=>e.crops[h].harvestTime<=t&&!e.crops[h].stolen);if(r.length===0)return"\u8FD9\u5BB6\u4EBA\u7684\u7530\u5730\u4E2D\u53EF\u6CA1\u6709\u6210\u719F\u7684\u4F5C\u7269\uFF0C\u6362\u4E2A\u76EE\u6807\u5427~";let a=r[Math.floor(Math.random()*r.length)],d=e.crops[a].seed.replace("\u79CD\u5B50","");return this.warehouse[d]||(this.warehouse[d]=0),this.warehouse[d]++,delete e.crops[a],this.lastStealTime=t,this.saveData(),e.saveData(),`\u55EF\u54FC~\u6210\u529F\u5077\u53D6\u5230${d}\u5566\uFF01`}changeName(e){return this.name=e,this.saveData(),`\u8981\u6539\u540D\u6210${e}\u5417\uFF1F\u597D\u7684\u597D\u7684\uFF0C\u4E0D\u4F1A\u662F\u505A\u4E86\u4EC0\u4E48\u4E8F\u5FC3\u4E8B\u5427~`}useFertilizer(e){if(!this.warehouse.\u80A5\u6599)return"\u4F60\u7684\u4ED3\u5E93\u4E2D\u6CA1\u6709\u80A5\u6599\u54E6";if(!this.crops[e])return`${e}\u6CA1\u6709\u79CD\u690D\u4F5C\u7269\u3002`;let t=new Date().getTime(),r=(this.crops[e].harvestTime-t)/(60*60*1e3);return r<=0?`${e}\u7684\u4F5C\u7269\u5DF2\u7ECF\u6210\u719F\u5566\uFF01`:(this.crops[e].harvestTime-=r*.5*60*60*1e3,this.warehouse.\u80A5\u6599--,this.warehouse.\u80A5\u6599===0&&delete this.warehouse.\u80A5\u6599,this.saveData(),`\u6210\u529F\u5BF9${e}\u4F7F\u7528\u9B54...\u80A5\u6599\uFF0C\u5269\u4F59\u65F6\u95F4\u51CF\u5C11\u4E00\u534A~`)}getLastStealTime(){return this.lastStealTime}discardItem(e,t=1){return this.warehouse[e]?isNaN(t)||t<=0||!Number.isInteger(t)?"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u6570\u76EE\u3002":this.warehouse[e]<t?"\u8981\u4E22\u5F03\u7684\u6570\u76EE\u592A\u591A\u5566\uFF01":(this.warehouse[e]-=t,this.warehouse[e]===0&&delete this.warehouse[e],this.saveData(),`\u6210\u529F\u4E22\u5F03${t}\u4E2A${e}\u3002`):`\u4F60\u6CA1\u6709${e}\u7269\u54C1\u3002`}},R=class m extends S{constructor(e,t){super(e,t),this.fishCount=0,this.lastFishTime=0,this.fishCooldown=0,this.wormCatchCount=0,this.explorationType=null,this.explorationStartTime=null}static getData(e){try{let t=JSON.parse(seal.ext.find("\u6211\u7684\u519C\u7530\u63D2\u4EF6").storageGet(e)||"{}");if(Object.keys(t).length===0)return null;let r=new m(e,t.name);for(let a in t)r[a]=t[a]||r[a];return r}catch(t){return null}}refreshFishPond(){let t=new Date().toDateString();this.lastFishPondRefresh!==t&&(this.fishPond=Math.floor(Math.random()*11)+15,this.lastFishPondRefresh=t,this.saveData())}fish(){this.refreshFishPond();let e=Date.now();if(this.fishCooldown>0&&e-this.lastFishTime<this.fishCooldown)return`\u9C7C\u5858\u4E2D\u7684\u9C7C\u513F\u90FD\u8EB2\u8D77\u6765\u4E86\uFF0C\u7B49\u4E00\u4F1A\u513F\u518D\u6765\u5427\uFF01\u5514...\u6211\u770B\u770B\uFF0C\u8FD8\u8981${Math.ceil((this.fishCooldown-(e-this.lastFishTime))/6e4)}\u5206\u949F\u540E\u4ED6\u4EEC\u624D\u4F1A\u51FA\u73B0\u54E6~`;if(this.fishPond<=0)return"\u9C7C\u5858\u4E2D\u7684\u9C7C\u5DF2\u7ECF\u6CA1\u6709\u4E86\uFF0C\u660E\u5929\u518D\u6765\u5427~";if(!this.warehouse.\u9C7C\u9975)return"\u4F60\u8FD8\u6CA1\u6709\u9C7C\u9975\u5462\uFF0C\u5148\u53BB\u5546\u5E97\u4E70\u70B9\u5566~";if(this.warehouse.\u9C7C\u9975--,this.warehouse.\u9C7C\u9975===0&&delete this.warehouse.\u9C7C\u9975,!(Math.random()<.4))return this.fishPond--,this.saveData(),this.fishCount++,this.checkFishCooldown(),"\u54CE\u5440\uFF01\u9C7C\u8DD1\u4E86...";let a="";switch(this.level){case 4:a=this.getRandomFishType(["\u9CA4\u9C7C","\u9CB1\u9C7C","\u5C0F\u5634\u9C88\u9C7C","\u592A\u9633\u9C7C","\u9CC0\u9C7C"]);break;case 5:a=this.getRandomFishType(["\u9CA4\u9C7C","\u9CB1\u9C7C","\u5C0F\u5634\u9C88\u9C7C","\u592A\u9633\u9C7C","\u9CC0\u9C7C","\u6C99\u4E01\u9C7C","\u6CB3\u9C88","\u9CA2\u9C7C","\u9CB7\u9C7C","\u7EA2\u9CB7\u9C7C","\u6D77\u53C2","\u8679\u9CDF\u9C7C"]);break;case 6:a=this.getRandomFishType(["\u9CA4\u9C7C","\u9CB1\u9C7C","\u5C0F\u5634\u9C88\u9C7C","\u592A\u9633\u9C7C","\u9CC0\u9C7C","\u6C99\u4E01\u9C7C","\u6CB3\u9C88","\u9CA2\u9C7C","\u9CB7\u9C7C","\u7EA2\u9CB7\u9C7C","\u6D77\u53C2","\u8679\u9CDF\u9C7C","\u5927\u773C\u9C7C","\u897F\u9CB1","\u5927\u5934\u9C7C","\u5927\u5634\u9C88\u9C7C","\u9C91\u9C7C","\u9B3C\u9C7C"]);break;case 7:a=this.getRandomFishType(["\u9CA4\u9C7C","\u9CB1\u9C7C","\u5C0F\u5634\u9C88\u9C7C","\u592A\u9633\u9C7C","\u9CC0\u9C7C","\u6C99\u4E01\u9C7C","\u6CB3\u9C88","\u9CA2\u9C7C","\u9CB7\u9C7C","\u7EA2\u9CB7\u9C7C","\u6D77\u53C2","\u8679\u9CDF\u9C7C","\u5927\u773C\u9C7C","\u897F\u9CB1","\u5927\u5934\u9C7C","\u5927\u5634\u9C88\u9C7C","\u9C91\u9C7C","\u9B3C\u9C7C","\u7F57\u975E\u9C7C","\u6728\u8DC3\u9C7C","\u72EE\u5B50\u9C7C","\u6BD4\u76EE\u9C7C","\u5927\u6BD4\u76EE\u9C7C","\u5348\u591C\u9CA4\u9C7C"]);break;default:a=this.getRandomFishType(["\u9CA4\u9C7C","\u9CB1\u9C7C","\u5C0F\u5634\u9C88\u9C7C","\u592A\u9633\u9C7C","\u9CC0\u9C7C","\u6C99\u4E01\u9C7C","\u6CB3\u9C88","\u9CA2\u9C7C","\u9CB7\u9C7C","\u7EA2\u9CB7\u9C7C","\u6D77\u53C2","\u8679\u9CDF\u9C7C","\u5927\u773C\u9C7C","\u897F\u9CB1","\u5927\u5934\u9C7C","\u5927\u5634\u9C88\u9C7C","\u9C91\u9C7C","\u9B3C\u9C7C","\u7F57\u975E\u9C7C","\u6728\u8DC3\u9C7C","\u72EE\u5B50\u9C7C","\u6BD4\u76EE\u9C7C","\u5927\u6BD4\u76EE\u9C7C","\u5348\u591C\u9CA4\u9C7C","\u53F2\u83B1\u59C6\u9C7C","\u867E\u864E\u9C7C","\u7EA2\u9CBB\u9C7C","\u9752\u82B1\u9C7C","\u72D7\u9C7C","\u864E\u7EB9\u9CDF\u9C7C","\u84DD\u94C1\u997C\u9C7C","\u6C99\u9C7C"])}return this.warehouse[a]||(this.warehouse[a]=0),this.warehouse[a]++,this.fishPond--,this.saveData(),this.fishCount++,this.checkFishCooldown(),`\u7B49\u5F85...\u7B49\u5F85...\u6210\u529F\u9493\u5230\u4E00\u6761${a}\uFF01`}checkFishCooldown(){this.fishCount>=4&&this.fishCount<=6?(this.fishCooldown=Math.floor(Math.random()*31+30)*60*1e3,this.lastFishTime=Date.now()):this.fishCount>6&&(this.fishCount=0,this.fishCooldown=0)}getRandomFishType(e){return e[Math.floor(Math.random()*e.length)]}catchWorms(){return this.level<4?"\u4F60\u7684\u7B49\u7EA7\u4E0D\u591F\u54E6\uFF0C\u518D\u7B49\u7B49\u518D\u6765\u5427\uFF01":I.getInstance().getCurrentWeather()!=="\u96E8\u5929"?"\u4ECA\u5929\u53EF\u6CA1\u6709\u86AF\u8693\u51FA\u6765\u554A...":this.wormCatchCount>=12?"\u8FD9\u91CC\u5DF2\u7ECF\u6CA1\u6709\u86AF\u8693\u4E86...":Math.random()<.8?(this.warehouse.\u9C7C\u9975||(this.warehouse.\u9C7C\u9975=0),this.warehouse.\u9C7C\u9975++,this.wormCatchCount++,this.saveData(),"\u606D\u559C\u4F60\u6355\u6349\u5230\u4E86\u86AF\u8693\uFF01"):(this.wormCatchCount++,this.saveData(),"\u4F60\u6316\u4E86\u534A\u5929\u571F\uFF0C\u90FD\u6CA1\u627E\u5230\u86AF\u8693\uFF0C\u6709\u70B9\u53EF\u601C\u554A~")}getExplorationType(){let e=this.explorationType;return console.log(`\u8BFB\u53D6 explorationType: ${e}`),e}explore(e){if(this.explorationType){let a=this.getExplorationRemainingTime();return console.log(`\u5F53\u524D\u8FDC\u822A\u72B6\u6001: ${this.explorationType}, \u5269\u4F59\u65F6\u95F4: ${a}`),`\u4F60\u7684\u8239\u961F\u6B63\u5728\u63A2\u7D22\u4E2D\uFF0C\u8BA9\u6211\u770B\u770B...\u55EF\uFF0C\u8FD8\u6709${a}\u624D\u4F1A\u56DE\u6765\u54E6~`}let r={\u8FD1\u6D77\u8FDC\u822A:{duration:5*60*60*1e3,cost:1e3,reward:{minGold:1200,maxGold:1500,seeds:7}},\u8FDC\u6D77\u63A2\u7D22:{duration:8*60*60*1e3,cost:3e3,reward:{minGold:3200,maxGold:4e3,seeds:15,fish:5}},\u968F\u673A\u63A2\u7D22:{duration:12*60*60*1e3,cost:5e3,reward:{minGold:3e3,maxGold:8e3,seeds:{min:10,max:20},fish:{min:3,max:10}}}}[e];return r?this.money<r.cost?`\u4F60\u7684\u91D1\u5E01\u4E0D\u591F\u8FDB\u884C${e}\u54E6~`:(console.log(`\u5B58\u50A8\u524D explorationType: ${this.explorationType}, explorationStartTime: ${this.explorationStartTime}`),this.money-=r.cost,this.explorationType=e,this.explorationStartTime=Date.now(),this.saveData(),console.log(`\u5B58\u50A8\u540E explorationType: ${this.explorationType}, explorationStartTime: ${this.explorationStartTime}`),"\u4F60\u7684\u8239\u961F\u51FA\u822A\u5566~"):`\u9009\u62E9\u8FDC\u822A\u7C7B\u578B\uFF1A
1.\u8FD1\u6D77\u8FDC\u822A\uFF085\u5C0F\u65F6\uFF0C1000\u91D1\u5E01\uFF09
2.\u8FDC\u6D77\u63A2\u7D22\uFF088\u5C0F\u65F6\uFF0C3000\u91D1\u5E01\uFF09
3.\u968F\u673A\u63A2\u7D22\uFF0812\u5C0F\u65F6\uFF0C5000\u91D1\u5E01\uFF09

\u7528\u201C.\u8FDC\u822A<\u63A2\u7D22\u7C7B\u578B>\u5F00\u542F\u8FDC\u822A\u5427\uFF01
*\u8FDC\u822A\u7ED3\u675F\u540E\u4F1A\u6765\u627E\u4F60\u7684\uFF01`}getExplorationRemainingTime(){if(!this.explorationType||!this.explorationStartTime)return"0\u79D2";let t={\u8FD1\u6D77\u8FDC\u822A:5*60*60*1e3,\u8FDC\u6D77\u63A2\u7D22:8*60*60*1e3,\u968F\u673A\u63A2\u7D22:12*60*60*1e3}[this.explorationType],r=Date.now()-this.explorationStartTime,a=t-r;if(a<=0)return"0\u79D2";let c=Math.floor(a/(60*60*1e3)),d=Math.floor(a%(60*60*1e3)/(60*1e3)),h=Math.floor(a%(60*1e3)/1e3);return`${c}\u5C0F\u65F6${d}\u5206\u949F${h}\u79D2`}checkExplorationCompletion(){if(!this.explorationType||!this.explorationStartTime)return"";let t={\u8FD1\u6D77\u8FDC\u822A:{duration:5*60*60*1e3,reward:{minGold:1200,maxGold:1500,seeds:7}},\u8FDC\u6D77\u63A2\u7D22:{duration:8*60*60*1e3,reward:{minGold:3200,maxGold:4e3,seeds:15,fish:5}},\u968F\u673A\u63A2\u7D22:{duration:12*60*60*1e3,reward:{minGold:3e3,maxGold:8e3,seeds:{min:10,max:20},fish:{min:3,max:10}}}}[this.explorationType];if(Date.now()-this.explorationStartTime>=t.duration){let a=t.reward,c=Math.floor(Math.random()*(a.maxGold-a.minGold+1))+a.minGold;this.money+=c;let d=Object.keys(g).filter(v=>v.endsWith("\u79CD\u5B50")),h=d[Math.floor(Math.random()*d.length)],f=a.seeds;this.warehouse[h]||(this.warehouse[h]=0),this.warehouse[h]+=f;let p="";if(a.fish){let v=Object.keys(this.warehouse).filter(x=>this.isFish(x)),w=v[Math.floor(Math.random()*v.length)],T=a.fish;this.warehouse[w]||(this.warehouse[w]=0),this.warehouse[w]+=T,p=`\u548C${w}\xD7${T}`}return this.explorationType=null,this.explorationStartTime=null,this.saveData(),`\u4F60\u7684\u8239\u961F\u5F52\u6765\u5566\uFF0C\u5E26\u56DE\u4E86${c}\u91D1\u5E01\u3001${h}\xD7${f}${p}`}return""}isFish(e){return["\u9CA4\u9C7C","\u9CB1\u9C7C","\u5C0F\u5634\u9C88\u9C7C","\u592A\u9633\u9C7C","\u9CC0\u9C7C","\u6C99\u4E01\u9C7C","\u6CB3\u9C88","\u9CA2\u9C7C","\u9CB7\u9C7C","\u7EA2\u9CB7\u9C7C","\u6D77\u53C2","\u8679\u9CDF\u9C7C","\u5927\u773C\u9C7C","\u897F\u9CB1","\u5927\u5934\u9C7C","\u5927\u5634\u9C88\u9C7C","\u9C91\u9C7C","\u9B3C\u9C7C","\u7F57\u975E\u9C7C","\u6728\u8DC3\u9C7C","\u72EE\u5B50\u9C7C","\u6BD4\u76EE\u9C7C","\u5927\u6BD4\u76EE\u9C7C","\u5348\u591C\u9CA4\u9C7C","\u53F2\u83B1\u59C6\u9C7C","\u867E\u864E\u9C7C","\u7EA2\u9CBB\u9C7C","\u9752\u82B1\u9C7C","\u72D7\u9C7C","\u864E\u7EB9\u9CDF\u9C7C","\u84DD\u94C1\u997C\u9C7C","\u6C99\u9C7C"].includes(e)}};(()=>{let m=I.getInstance();function e(){if(!seal.ext.find("\u6211\u7684\u519C\u7530\u63D2\u4EF6")){let r=seal.ext.new("\u6211\u7684\u519C\u7530\u63D2\u4EF6","bug\u4EBA@","1.0.0"),a={name:"\u6210\u4E3A\u519C\u592B",help:"\u6307\u4EE4\uFF1A.\u6210\u4E3A\u519C\u592B",solve:(s,n,o)=>t(s,n,o,(i,l,u)=>(i?seal.replyToSender(s,n,"\u54CE\u5440~\u4F60\u5DF2\u7ECF\u662F\u519C\u592B\u4E86\uFF0C\u96BE\u9053\u5FD8\u8BB0\u4E86\u5417\uFF1F"):(i=new S(l,u),i.saveData(),seal.replyToSender(s,n,`\u606D\u559C\u4F60\u6210\u4E3A\u519C\u592B\uFF01
\u73B0\u5728\u4F60\u62E5\u67096\u5757\u7530\u5730\u3001200\u91D1\u5E01\u548C\u9632\u98CE\u8349\u79CD\u5B50\xD76~
x\u73B0\u5728\u4F60\u7684\u7B49\u7EA7\u4E3A1\uFF0C\u7ECF\u9A8C\u503C\u4E3A0\uFF0C\u52A0\u6CB9\u5427\uFF01

\u8BF7\u4F7F\u7528\u201C.\u519C\u573A\u6307\u4EE4\u201D\u67E5\u770B\u76F8\u5173\u6307\u4EE4`)),seal.ext.newCmdExecuteResult(!0)))},c={name:"\u519C\u573A\u6307\u4EE4",help:"\u6307\u4EE4\uFF1A.\u519C\u573A\u6307\u4EE4",solve:(s,n,o)=>(seal.replyToSender(s,n,`
    \u519C\u573A\u6307\u4EE4\u5E2E\u52A9\u4FE1\u606F\uFF1A
    .\u7B7E\u5230 - \u7B7E\u5230\u5E76\u83B7\u5F97\u6BCF\u65E5\u5956\u52B1

    .\u6211\u7684\u519C\u7530 - \u67E5\u770B\u6211\u7684\u519C\u7530\u4FE1\u606F
    .\u79CD\u690D<\u519C\u4F5C\u7269><\u6570\u91CF> - \u79CD\u690D\u519C\u4F5C\u7269\uFF08\u6570\u91CF\u548C\u7269\u54C1\u95F4\u8BF7\u52A0\u7A7A\u683C\uFF09
    .\u519C\u7530\u5546\u5E97 - \u67E5\u770B\u519C\u7530\u5546\u5E97
    .\u8D2D\u4E70 <\u5546\u54C1\u540D>\uFF08\u6570\u91CF\uFF09 - \u8D2D\u4E70\u5546\u54C1\uFF08\u6570\u91CF\u548C\u7269\u54C1\u95F4\u8BF7\u52A0\u7A7A\u683C\uFF09
    .\u51FA\u552E <\u5546\u54C1\u540D>\uFF08\u6570\u91CF\uFF09 - \u51FA\u552E\u5546\u54C1\uFF08\u6570\u91CF\u548C\u7269\u54C1\u95F4\u8BF7\u52A0\u7A7A\u683C\uFF09
    .\u597D\u53CB\u4FE1\u606F<@\u5176\u4ED6\u4EBA> - \u67E5\u770B\u597D\u53CB\u7684\u519C\u7530\u4FE1\u606F
    .\u6211\u7684\u4ED3\u5E93 - \u67E5\u770B\u6211\u7684\u4ED3\u5E93

    .\u94F2\u9664\u519C\u7530<\u7530\u5730\u540D> - \u94F2\u9664\u519C\u7530\u4E2D\u7684\u4F5C\u7269
    .\u5077\u7A83<@\u5176\u4ED6\u4EBA> - \u5077\u7A83\u5176\u4ED6\u4EBA\u7684\u4F5C\u7269
    .\u6536\u83B7 - \u6536\u83B7\u6240\u6709\u6210\u719F\u7684\u4F5C\u7269
    .\u4E22\u5F03 <\u7269\u54C1\u540D>\uFF08\u6570\u76EE\uFF09 - \u4E22\u5F03\u7269\u54C1\uFF08\u6570\u91CF\u548C\u7269\u54C1\u95F4\u8BF7\u52A0\u7A7A\u683C\uFF09
    .\u4FEE\u6539\u519C\u592B\u540D<\u65B0\u7528\u6237\u540D> - \u4FEE\u6539\u519C\u592B\u540D
    .\u4F7F\u7528\u80A5\u6599 <\u7530\u5730\u540D> - \u4F7F\u7528\u80A5\u6599\u7F29\u77ED\u65F6\u95F4

    .\u9493\u9C7C - \u5728\u9C7C\u5858\u9493\u9C7C
    .\u6293\u86AF\u8693 - \u6293\u86AF\u8693\u8F6C\u6362\u4E3A\u9C7C\u9975
    .\u8FDC\u822A - \u6D3E\u9063\u8239\u961F\u8FDC\u822A\u63A2\u7D22
    .\u519C\u573A\u6307\u4EE4 - \u67E5\u770B\u519C\u573A\u6307\u4EE4\u5E2E\u52A9\u4FE1\u606F
    `),seal.ext.newCmdExecuteResult(!0))},d={name:"\u6211\u7684\u519C\u7530",help:"\u6307\u4EE4\uFF1A.\u6211\u7684\u519C\u7530",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);m.updateWeather();let l=new Date,u=`${l.getMonth()+1}\u6708${l.getDate()}\u65E5`,y=m.getWeatherInfo(),C=i.getFarmInfo(),M=`\u7528\u6237\u540D: ${i.name}
\u65E5\u671F\uFF1A${u}
${y}
${C}`;return seal.replyToSender(s,n,M),seal.ext.newCmdExecuteResult(!0)})},h={name:"\u79CD\u690D",help:"\u6307\u4EE4\uFF1A.\u79CD\u690D<\u519C\u4F5C\u7269><\u6570\u91CF>",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=o.getArgN(1),u=parseInt(o.getArgN(2));return isNaN(u)||u<=0?(seal.replyToSender(s,n,"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u6570\u91CF\u5566..."),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(s,n,i.plantCrop(l,u)),seal.ext.newCmdExecuteResult(!0))})},f={name:"\u519C\u7530\u5546\u5E97",help:"\u6307\u4EE4\uFF1A.\u519C\u7530\u5546\u5E97",solve:(s,n,o)=>t(s,n,o,i=>i?(seal.replyToSender(s,n,i.getStoreInfo()),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0)))},p={name:"\u8D2D\u4E70",help:"\u6307\u4EE4\uFF1A.\u8D2D\u4E70 <\u5546\u54C1\u540D>\uFF08\u6570\u91CF\uFF09",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=o.getArgN(1),u=parseInt(o.getArgN(2))||1;return seal.replyToSender(s,n,i.buyItem(l,u)),seal.ext.newCmdExecuteResult(!0)})},v={name:"\u51FA\u552E",help:"\u6307\u4EE4\uFF1A.\u51FA\u552E <\u5546\u54C1\u540D>\uFF08\u6570\u91CF\uFF09",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=o.getArgN(1),u=parseInt(o.getArgN(2))||1;return seal.replyToSender(s,n,i.sellItem(l,u)),seal.ext.newCmdExecuteResult(!0)})},w={name:"\u597D\u53CB\u4FE1\u606F",help:"\u6307\u4EE4\uFF1A.\u597D\u53CB\u4FE1\u606F<\u5176\u4ED6\u4EBA>",allowDelegate:!0,solve:(s,n,o)=>{let i=seal.getCtxProxyFirst(s,o);return t(i,n,o,l=>l?(seal.replyToSender(s,n,l.getFarmInfo()),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0)))}},T={name:"\u6211\u7684\u4ED3\u5E93",help:"\u6307\u4EE4\uFF1A.\u6211\u7684\u4ED3\u5E93",solve:(s,n,o)=>t(s,n,o,i=>i?(seal.replyToSender(s,n,i.getWarehouseInfo()),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0)))},x={name:"\u94F2\u9664\u519C\u7530",help:"\u6307\u4EE4\uFF1A.\u94F2\u9664\u519C\u7530<\u5E8F\u53F7>",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=o.getArgN(1);return seal.replyToSender(s,n,i.removeCrop(l)),seal.ext.newCmdExecuteResult(!0)})},D={name:"\u5077\u7A83",help:"\u6307\u4EE4\uFF1A.\u5077\u7A83<\u5176\u4ED6\u4EBA>",allowDelegate:!0,solve:(s,n,o)=>{let i=seal.getCtxProxyFirst(s,o);return t(i,n,o,l=>{let u=n.sender.userId;if(l=S.getData(u),!l)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let y=seal.getCtxProxyFirst(s,o),C=S.getData(y.player.userId);if(!C)return seal.replyToSender(s,n,"\u8FD9\u4E2A\u4EBA\u8FD8\u6CA1\u6709\u6210\u4E3A\u519C\u592B\u54E6\uFF0C\u8981\u4E0D\u8981\u8BD5\u7740\u8BA9\u4ED6\u4E5F\u52A0\u5165\u4F60\u5440~\u3002"),seal.ext.newCmdExecuteResult(!0);let M=new Date().getTime();if(l.getLastStealTime()!=0&&M-l.getLastStealTime()<6e4){let k=Math.ceil((6e4-(M-l.getLastStealTime()))/1e3);return seal.replyToSender(s,n,`\u9644\u8FD1\u8FD8\u6709\u4EBA\u770B\u7740\u5462\uFF0C\u518D\u7B49${k}\u79D2\u540E\u518D\u8BD5\u5427...`),seal.ext.newCmdExecuteResult(!0)}let $=l.stealCrop(C);return seal.replyToSender(s,n,$),seal.ext.newCmdExecuteResult(!0)})}},E={name:"\u6536\u83B7",help:"\u6307\u4EE4\uFF1A.\u6536\u83B7",solve:(s,n,o)=>t(s,n,o,i=>i?(console.log("\u6536\u83B7\u6307\u4EE4: \u4E00\u952E\u6536\u83B7"),seal.replyToSender(s,n,i.harvestCrop("all")),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0)))},W={name:"\u4E22\u5F03",help:"\u6307\u4EE4\uFF1A.\u4E22\u5F03 <\u7269\u54C1\u540D>\uFF08\u6570\u76EE\uFF09",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=o.getArgN(1),u=parseInt(o.getArgN(2))||1;console.log(`\u4E22\u5F03\u6307\u4EE4: \u7269\u54C1: ${l}, \u6570\u91CF: ${u}`);let y=i.discardItem(l,u);return console.log(`\u4E22\u5F03\u7ED3\u679C: ${y}`),seal.replyToSender(s,n,y),seal.ext.newCmdExecuteResult(!0)})},P={name:"\u4FEE\u6539\u519C\u592B\u540D",help:"\u6307\u4EE4\uFF1A.\u4FEE\u6539\u519C\u592B\u540D<\u65B0\u7528\u6237\u540D>",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=o.getArgN(1),u=i.changeName(l);return seal.replyToSender(s,n,u),seal.ext.newCmdExecuteResult(!0)})},b={name:"\u4F7F\u7528\u80A5\u6599",help:"\u6307\u4EE4\uFF1A.\u4F7F\u7528\u80A5\u6599 <\u7530\u5730\u5E8F\u53F7>",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=o.getArgN(1),u=i.useFertilizer(l);return seal.replyToSender(s,n,u),seal.ext.newCmdExecuteResult(!0)})},N={name:"\u7B7E\u5230",help:"\u6307\u4EE4\uFF1A.\u7B7E\u5230",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=new Date,u=l.toDateString();if(i.lastSignInDate===u){m.updateWeather();let k=`${l.getMonth()+1}\u6708${l.getDate()}\u65E5`,j=m.getWeatherInfo(),U=`\u4ECA\u5929\u5DF2\u7ECF\u6253\u8FC7\u62DB\u547C\u4E86\u5427\uFF01\u8FD8\u662F\u8BF4\uFF0C\u4F60\u662F\u6765\u770B\u770B\u65E5\u5386\u770B\u770B\u5929\u6C14\u7684\uFF1F
\u65E5\u671F\uFF1A${k}
${j}`;return seal.replyToSender(s,n,U),seal.ext.newCmdExecuteResult(!0)}m.updateWeather();let y=`${l.getMonth()+1}\u6708${l.getDate()}\u65E5`,C=m.getWeatherInfo(),M=Math.floor(Math.random()*31)+20;i.money+=M,i.lastSignInDate=u,i.saveData();let $=`\u7B7E\u5230\u6210\u529F\uFF01
\u65E5\u671F\uFF1A${y}
${C}
\u83B7\u5F97${M}\u91D1\u5E01\u3002`;switch(m.getCurrentWeather()){case"\u6674\u5929":$+=`
\u54E6\u5440\u54E6\u5440\uFF0C\u662F\u4E2A\u5927\u6674\u5929\u5462~\uFF08\u65E0\u589E\u76CA\u5929\u6C14\uFF09`;break;case"\u96E8\u5929":$+=`
\u4E0B\u96E8\u4E86\uFF0C\u662F\u690D\u7269\u4EEC\u559C\u6B22\u7684\u65E5\u5B50\u5462~\uFF08\u6536\u83B7\u65F6\u95F4\u7F29\u77ED\uFF0C\u53EF\u4EE5\u6293\u86AF\u8693\uFF09`;break;case"\u5E72\u65F1":$+=`
\u771F\u662F\u706B\u70ED\u7684\u5929\u6C14...\u522B\u5FD8\u4E86\u7ED9\u519C\u7530\u6D47\u6C34\uFF08\u6536\u83B7\u65F6\u95F4\u5EF6\u957F\uFF09`;break;case"\u66B4\u98CE\u96E8":$+=`
\u54CE\u5440\uFF01\u4ECA\u5929\u66B4\u98CE\u96E8\u8981\u6765\u4E86\uFF0C\u6CE8\u610F\u4F5C\u7269\u522B\u88AB\u5439\u8DD1\u4E86\uFF01\uFF08\u6536\u83B7\u65F6\u95F4\u5927\u5E45\u5EF6\u957F\uFF09`;break;case"\u4E30\u6536\u65E5":$+=`
\u771F\u662F\u4EE4\u4EBA\u795E\u6E05\u6C14\u723D\u7684\u597D\u65E5\u5B50\uFF0C\u4F60\u8BF4\u662F\u4E0D\u662F~\uFF08\u6536\u83B7\u65F6\u95F4\u5927\u5E45\u7F29\u77ED\uFF09`;break}return seal.replyToSender(s,n,$),seal.ext.newCmdExecuteResult(!0)})},F={name:"\u9493\u9C7C",help:"\u6307\u4EE4\uFF1A.\u9493\u9C7C",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=i.fish();return seal.replyToSender(s,n,l),seal.ext.newCmdExecuteResult(!0)})},O={name:"\u6293\u86AF\u8693",help:"\u6307\u4EE4\uFF1A.\u6293\u86AF\u8693",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let u=R.getData(i.id).catchWorms();return seal.replyToSender(s,n,u),seal.ext.newCmdExecuteResult(!0)})},H={name:"\u8FDC\u822A",help:"\u6307\u4EE4\uFF1A.\u8FDC\u822A",solve:(s,n,o)=>t(s,n,o,i=>{if(!i)return seal.replyToSender(s,n,"\u4F60\u8FD8\u4E0D\u662F\u519C\u592B\u54E6\uFF0C\u8BD5\u7740\u7528.\u6210\u4E3A\u519C\u592B\u6307\u4EE4\u52A0\u5165\u5927\u5BB6\u5427\uFF01"),seal.ext.newCmdExecuteResult(!0);let l=R.getData(i.id),u=l.getExplorationType();if(u){let C=l.getExplorationRemainingTime();return console.log(`\u5F53\u524D\u8FDC\u822A\u72B6\u6001: ${u}, \u5269\u4F59\u65F6\u95F4: ${C}`),seal.replyToSender(s,n,`\u4F60\u7684\u8239\u961F\u6B63\u5728\u63A2\u7D22\u4E2D\uFF0C\u8BA9\u6211\u770B\u770B...\u55EF\uFF0C\u8FD8\u6709${C}\u624D\u4F1A\u56DE\u6765\u54E6~`),seal.ext.newCmdExecuteResult(!0)}let y=l.explore(o.getArgN(1));return seal.replyToSender(s,n,y),seal.ext.newCmdExecuteResult(!0)})};r.cmdMap.\u6210\u4E3A\u519C\u592B=a,r.cmdMap.\u519C\u573A\u6307\u4EE4=c,r.cmdMap.\u6211\u7684\u519C\u7530=d,r.cmdMap.\u79CD\u690D=h,r.cmdMap.\u519C\u7530\u5546\u5E97=f,r.cmdMap.\u8D2D\u4E70=p,r.cmdMap.\u51FA\u552E=v,r.cmdMap.\u597D\u53CB\u4FE1\u606F=w,r.cmdMap.\u6211\u7684\u4ED3\u5E93=T,r.cmdMap.\u94F2\u9664\u519C\u7530=x,r.cmdMap.\u5077\u7A83=D,r.cmdMap.\u6536\u83B7=E,r.cmdMap.\u4E22\u5F03=W,r.cmdMap.\u4FEE\u6539\u519C\u592B\u540D=P,r.cmdMap.\u4F7F\u7528\u80A5\u6599=b,r.cmdMap.\u7B7E\u5230=N,r.cmdMap.\u9493\u9C7C=F,r.cmdMap.\u6293\u86AF\u8693=O,r.cmdMap.\u8FDC\u822A=H,seal.ext.register(r)}}function t(r,a,c,d){let h=r.player.userId,f=r.player.name,p=S.getData(h);return d(p,h,f)}e()})();})();
